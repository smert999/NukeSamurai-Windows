# üì¶ NukeSamurai - –ü–æ—à–∞–≥–æ–≤–∞—è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤

## üéØ –¶–µ–ª—å
–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NukeSamurai **—Å –Ω—É–ª—è** –Ω–∞ —á–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ Windows.

---

## ‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ |
|-----------|------------|
| **–û–°** | Windows 10/11 (64-bit) |
| **GPU** | NVIDIA GPU —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA (–Ω–∞–ø—Ä–∏–º–µ—Ä, RTX 4090, RTX 3090, GTX 1080 Ti –∏ —Ç.–¥.) |
| **Nuke** | Nuke 15.x –∏–ª–∏ 16.x (–º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º Nuke 16.0v4) |
| **Python** | Python 3.10 (—Å–∏—Å—Ç–µ–º–Ω—ã–π, –ù–ï –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Nuke!) |
| **–î–∏—Å–∫** | ~10 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ |

---

## üìã –ß—Ç–æ –ë—É–¥–µ—Ç –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ?

1. **Python 3.10** (—Å–∏—Å—Ç–µ–º–Ω—ã–π)
2. **PyTorch 2.5.1** —Å CUDA 11.8
3. **OpenCV** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
4. **SAM2 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** (hydra-core, iopath, –∏ —Ç.–¥.)
5. **SAM 2.1 –º–æ–¥–µ–ª–∏** (—á–µ–∫–ø–æ–∏–Ω—Ç—ã)
6. **NukeSamurai –ø–ª–∞–≥–∏–Ω** –¥–ª—è Nuke

---

# üöÄ –ß–ê–°–¢–¨ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.10

## –®–∞–≥ 1.1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Python

–û—Ç–∫—Ä–æ–π—Ç–µ **Windows PowerShell** –∏–ª–∏ **CMD** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```cmd
python --version
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ï—Å–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `Python 3.10.x` ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –®–∞–≥—É 1.3
- –ï—Å–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥—É—é –≤–µ—Ä—Å–∏—é –∏–ª–∏ –æ—à–∏–±–∫—É ‚Üí –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É

---

## –®–∞–≥ 1.2: –°–∫–∞—á–∞–π—Ç–µ –∏ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.10

### **1.2.1 –°–∫–∞—á–∏–≤–∞–Ω–∏–µ**

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç:
```
https://www.python.org/downloads/release/python-31011/
```

–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Å–µ–∫—Ü–∏–∏ **"Files"** –∏ —Å–∫–∞—á–∞–π—Ç–µ:
```
Windows installer (64-bit)
–†–∞–∑–º–µ—Ä: ~27 MB
–§–∞–π–ª: python-3.10.11-amd64.exe
```

### **1.2.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π `python-3.10.11-amd64.exe`
2. ‚úÖ **–í–ê–ñ–ù–û!** –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É: **"Add Python 3.10 to PATH"**
3. –ù–∞–∂–º–∏—Ç–µ **"Install Now"**
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
5. –ù–∞–∂–º–∏—Ç–µ **"Close"**

---

## –®–∞–≥ 1.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∏ Python

–û—Ç–∫—Ä–æ–π—Ç–µ **–ù–û–í–û–ï –æ–∫–Ω–æ CMD** –∏–ª–∏ **PowerShell** (—Å—Ç–∞—Ä–æ–µ –æ–∫–Ω–æ –Ω–µ —É–≤–∏–¥–∏—Ç PATH):

```cmd
python --version
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**
```
Python 3.10.11
```

–ï—Å–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Python 3.11 –∏–ª–∏ 3.12, –∑–Ω–∞—á–∏—Ç –≤ PATH –¥—Ä—É–≥–∞—è –≤–µ—Ä—Å–∏—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```cmd
py -3.10 --version
```

---

# üî• –ß–ê–°–¢–¨ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PyTorch —Å CUDA

## –®–∞–≥ 2.1: –£–∑–Ω–∞–π—Ç–µ –í–µ—Ä—Å–∏—é CUDA –Ω–∞ –í–∞—à–µ–π –°–∏—Å—Ç–µ–º–µ

–û—Ç–∫—Ä–æ–π—Ç–µ CMD –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```cmd
nvidia-smi
```

**–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª –≤—ã–≤–æ–¥–∞:**
```
CUDA Version: 12.6  ‚Üê –í–∞—à–∞ –≤–µ—Ä—Å–∏—è
```

**–í–∞–∂–Ω–æ:**
- –ï—Å–ª–∏ CUDA 11.x ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PyTorch —Å cu118
- –ï—Å–ª–∏ CUDA 12.x ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PyTorch —Å cu121 (–±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ CUDA 12.x)

**–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (CUDA 12.x):**

---

## –®–∞–≥ 2.2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PyTorch 2.5.1 + CUDA 12.1

–û—Ç–∫—Ä–æ–π—Ç–µ CMD –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ **–û–î–ù–£** –∫–æ–º–∞–Ω–¥—É (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é):

```cmd
pip install torch==2.5.1 torchvision==0.20.1 --index-url https://download.pytorch.org/whl/cu121
```

**–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–π–º—ë—Ç 5-10 –º–∏–Ω—É—Ç** (–∑–∞–≥—Ä—É–∑–∫–∞ ~2.5 GB).

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Downloading torch-2.5.1+cu121-...
Downloading torchvision-0.20.1+cu121-...
Successfully installed torch-2.5.1+cu121 torchvision-0.20.1+cu121
```

---

## –®–∞–≥ 2.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ PyTorch –∏ CUDA

–û—Ç–∫—Ä–æ–π—Ç–µ CMD –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```cmd
python -c "import torch; print(f'PyTorch: {torch.__version__}'); print(f'CUDA –¥–æ—Å—Ç—É–ø–Ω–∞: {torch.cuda.is_available()}'); print(f'CUDA –≤–µ—Ä—Å–∏—è: {torch.version.cuda}')"
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**
```
PyTorch: 2.5.1+cu121
CUDA –¥–æ—Å—Ç—É–ø–Ω–∞: True
CUDA –≤–µ—Ä—Å–∏—è: 12.1
```

‚úÖ **–ï—Å–ª–∏ `CUDA –¥–æ—Å—Ç—É–ø–Ω–∞: True`** ‚Üí –í—Å—ë –æ—Ç–ª–∏—á–Ω–æ, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –¥–∞–ª—å—à–µ!

‚ùå **–ï—Å–ª–∏ `CUDA –¥–æ—Å—Ç—É–ø–Ω–∞: False`**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥—Ä–∞–π–≤–µ—Ä NVIDIA (–∑–∞–ø—É—Å—Ç–∏—Ç–µ `nvidia-smi`)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≤–µ—Ä—Å–∏—é PyTorch —Å `+cu121` –∏–ª–∏ `+cu118`

---

# üìö –ß–ê–°–¢–¨ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —Ç–æ–º –∂–µ Python, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PyTorch!

## –®–∞–≥ 3.1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –í–°–ï–• –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–ª–∞–≥–∏–Ω–∞ (—Å–º. –ß–∞—Å—Ç—å 4), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `requirements.txt`:

```cmd
cd %USERPROFILE%\.nuke\NukeSamurai
pip install -r requirements.txt
```

**–°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- numpy
- opencv-python
- Pillow
- hydra-core, omegaconf
- iopath, timm, einops
- tqdm
- **loguru** ‚Üê ‚ö†Ô∏è –ß–∞—Å—Ç–æ –∑–∞–±—ã–≤–∞—é—Ç!

---

## –®–∞–≥ 3.2: –†—É—á–Ω–∞—è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–µ—Å–ª–∏ requirements.txt –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –í–°–ï –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:**
```cmd
pip install numpy opencv-python Pillow tqdm hydra-core omegaconf iopath timm einops loguru
```

**–ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:**

### OpenCV:
```cmd
pip install opencv-python
```

### –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:
```cmd
pip install Pillow hydra-core omegaconf iopath timm einops tqdm loguru
```

### NumPy (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
```cmd
pip install numpy
```
üí° **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** NumPy 1.x –∏ 2.x —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ —Ö–æ—Ä–æ—à–æ –≤ subprocess! Subprocess –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑–æ–ª–∏—Ä—É–µ—Ç –Ω–∞—Å –æ—Ç –ø—Ä–æ–±–ª–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Nuke.

---

## –®–∞–≥ 3.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –í—Å–µ—Ö –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `check_dependencies.py` –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ:

```python
import sys

dependencies = {
    'torch': 'PyTorch',
    'torchvision': 'TorchVision',
    'cv2': 'OpenCV',
    'PIL': 'Pillow',
    'hydra': 'Hydra',
    'omegaconf': 'OmegaConf',
    'iopath': 'IOPath',
    'timm': 'Timm (PyTorch Image Models)',
    'einops': 'Einops',
    'tqdm': 'tqdm',
    'loguru': 'Loguru',
    'numpy': 'NumPy'
}

print("=" * 60)
print("–ü–†–û–í–ï–†–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô")
print("=" * 60)

all_ok = True
for module, name in dependencies.items():
    try:
        mod = __import__(module)
        version = getattr(mod, '__version__', 'N/A')
        print(f"‚úÖ {name:15} {version}")
    except ImportError:
        print(f"‚ùå {name:15} –ù–ï –£–°–¢–ê–ù–û–í–õ–ï–ù")
        all_ok = False

print("=" * 60)

if all_ok:
    import torch
    print(f"\nüî• PyTorch CUDA: {torch.cuda.is_available()}")
    if torch.cuda.is_available():
        print(f"üéÆ GPU: {torch.cuda.get_device_name(0)}")
        print(f"üíæ VRAM: {torch.cuda.get_device_properties(0).total_memory / 1024**3:.1f} GB")
    print("\n‚úÖ –í–°–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –£–°–¢–ê–ù–û–í–õ–ï–ù–´!")
else:
    print("\n‚ùå –ù–ï–ö–û–¢–û–†–´–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –ù–ï –£–°–¢–ê–ù–û–í–õ–ï–ù–´!")
    sys.exit(1)
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```cmd
python check_dependencies.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
============================================================
–ü–†–û–í–ï–†–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô
============================================================
‚úÖ PyTorch          2.5.1+cu121
‚úÖ TorchVision      0.20.1+cu121
‚úÖ OpenCV           4.10.0
‚úÖ Pillow           10.4.0
‚úÖ Hydra            1.3.2
‚úÖ IOPath           0.1.10
‚úÖ tqdm             4.66.5
‚úÖ NumPy            1.26.4
============================================================

üî• PyTorch CUDA: True
üéÆ GPU: NVIDIA GeForce RTX 4090
üíæ VRAM: 24.0 GB

‚úÖ –í–°–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –£–°–¢–ê–ù–û–í–õ–ï–ù–´!
```

---

# üé® –ß–ê–°–¢–¨ 3.5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenCV –≤ Nuke Python (–¥–ª—è Bounding Box)

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!**

–§—É–Ω–∫—Ü–∏—è "Create Bounding Box" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `cv2.selectROI()` –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–±–ª–∞—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–∞.  
–≠—Ç–æ GUI —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–≤ Nuke Python**, –∞ –Ω–µ –≤ subprocess!

–ü–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å opencv-python –∏ numpy **–í NUKE PYTHON**.

---

## –®–∞–≥ 3.5.1: –ù–∞–π–¥–∏—Ç–µ python.exe –æ—Ç Nuke

–ü—É—Ç—å –∫ python.exe –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏ Nuke:

| –í–µ—Ä—Å–∏—è Nuke | Python | –ü—É—Ç—å |
|-------------|--------|------|
| Nuke 16.0v4 | Python 3.11 | `C:\Program Files\Nuke16.0v4\python.exe` |
| Nuke 15.1v5 | Python 3.9 | `C:\Program Files\Nuke15.1v5\python.exe` |
| Nuke 15.0 | Python 3.9 | `C:\Program Files\Nuke15.0\python.exe` |

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
```cmd
dir "C:\Program Files\Nuke16.0v4\python.exe"
```

---

## –®–∞–≥ 3.5.2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ opencv-python –∏ numpy

‚ö†Ô∏è **–¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!**

**–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell/CMD –ö–ê–ö –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†:**
- Win+X ‚Üí "Windows PowerShell (Admin)"
- –∏–ª–∏ Win+X ‚Üí "Command Prompt (Admin)"

**–î–ª—è Nuke 16.0v4:**
```cmd
"C:\Program Files\Nuke16.0v4\python.exe" -m pip install opencv-python numpy
```

**–î–ª—è Nuke 15.1v5:**
```cmd
"C:\Program Files\Nuke15.1v5\python.exe" -m pip install opencv-python numpy
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Collecting opencv-python
  Downloading opencv_python-4.10.0.84-cp39-cp39-win_amd64.whl
Collecting numpy
  Downloading numpy-1.26.4-cp39-cp39-win_amd64.whl
Installing collected packages: numpy, opencv-python
Successfully installed numpy-1.26.4 opencv-python-4.10.0.84
```

---

## –®–∞–≥ 3.5.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∏

**–î–ª—è Nuke 16.0v4:**
```cmd
"C:\Program Files\Nuke16.0v4\python.exe" -c "import cv2; print('OpenCV:', cv2.__version__)"
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**
```
OpenCV: 4.10.0
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–ª–∏ cmd/PowerShell **–ö–ê–ö –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ python.exe
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞

---

## ‚öôÔ∏è –ü–æ—á–µ–º—É –ù—É–∂–Ω—ã –î–í–ï –£—Å—Ç–∞–Ω–æ–≤–∫–∏?

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. SYSTEM PYTHON (3.10)                 ‚îÇ
‚îÇ    ‚Ä¢ torch, SAM2 dependencies           ‚îÇ
‚îÇ    ‚Ä¢ –î–ª—è mask generation (subprocess)   ‚îÇ
‚îÇ    ‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∫–∞: pip install -r req.txt ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 2. NUKE PYTHON (3.9/3.11)               ‚îÇ
‚îÇ    ‚Ä¢ opencv-python, numpy               ‚îÇ
‚îÇ    ‚Ä¢ –î–ª—è Bounding Box GUI               ‚îÇ
‚îÇ    ‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∫–∞: Nuke\python.exe -m pip  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

**Subprocess –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!**
- torch –æ—Å—Ç–∞–µ—Ç—Å—è –≤ subprocess (system Python)
- opencv –≤ Nuke Python —Ç–æ–ª—å–∫–æ –¥–ª—è GUI
- –ù–∏–∫–∞–∫–∏—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤!

---

# üé® –ß–ê–°–¢–¨ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ NukeSamurai –ü–ª–∞–≥–∏–Ω–∞

## –®–∞–≥ 4.1: –°–∫–∞—á–∞–π—Ç–µ –ü–ª–∞–≥–∏–Ω

**–í–∞—Ä–∏–∞–Ω—Ç A: GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub: `https://github.com/YOUR_USERNAME/NukeSamurai`
2. –ù–∞–∂–º–∏—Ç–µ –∑–µ–ª—ë–Ω—É—é –∫–Ω–æ–ø–∫—É **"Code"** ‚Üí **"Download ZIP"**
3. –†–∞—Å–ø–∞–∫—É–π—Ç–µ ZIP –≤ —É–¥–æ–±–Ω–æ–µ –º–µ—Å—Ç–æ

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò–∑ Release –ø–∞–ø–∫–∏**

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –ø–∞–ø–∫–∞ `NukeSamurai-Release`, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.

---

## –®–∞–≥ 4.2: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ü–ª–∞–≥–∏–Ω –≤ Nuke

### **4.2.1 –ù–∞–π–¥–∏—Ç–µ –ü–∞–ø–∫—É `.nuke`**

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:
```
C:\Users\<–í–∞—à–µ–ò–º—è–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>\.nuke\
```

–ù–∞–ø—Ä–∏–º–µ—Ä:
```
C:\Users\nfspr\.nuke\
```

–ï—Å–ª–∏ –ø–∞–ø–∫–∏ `.nuke` –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –µ—ë –≤—Ä—É—á–Ω—É—é.

---

### **4.2.2 –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –§–∞–π–ª—ã**

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫–∞—á–∞–Ω–Ω–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ –≤:
```
C:\Users\<–í–∞—à–µ–ò–º—è–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>\.nuke\NukeSamurai\
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:**
```
C:\Users\<–í—ã>\.nuke\
‚îú‚îÄ‚îÄ NukeSamurai\
‚îÇ   ‚îú‚îÄ‚îÄ init.py             ‚Üê –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ menu.py             ‚Üê –ú–µ–Ω—é –ø–ª–∞–≥–∏–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ scripts\
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nuke_samurai.py ‚Üê –õ–æ–≥–∏–∫–∞ –ø–ª–∞–≥–∏–Ω–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sam2_worker.py  ‚Üê Worker –¥–ª—è PyTorch
‚îÇ   ‚îú‚îÄ‚îÄ sam2_repo\          ‚Üê SAM2 –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sam2\
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ build_sam.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ checkpoints\    ‚Üê –ú–æ–¥–µ–ª–∏ (–ø–æ–∫–∞ –ø—É—Å—Ç–∞—è)
‚îÇ   ‚îî‚îÄ‚îÄ icons\              ‚Üê –ò–∫–æ–Ω–∫–∏
‚îî‚îÄ‚îÄ init.py                 ‚Üê –í–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π init.py (–µ—Å–ª–∏ –µ—Å—Ç—å)
```

---

## –®–∞–≥ 4.3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nuke `init.py`

### **4.3.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `init.py`**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ —Ñ–∞–π–ª:
```
C:\Users\<–í—ã>\.nuke\init.py
```

**–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –ù–ï–¢:**
–°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```python
# Load NukeSamurai plugin
import nuke
nuke.pluginAddPath('./NukeSamurai')
```

**–ï—Å–ª–∏ —Ñ–∞–π–ª –ï–°–¢–¨:**
–û—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ **–ö–û–ù–ï–¶**:

```python
# Load NukeSamurai plugin
import nuke
nuke.pluginAddPath('./NukeSamurai')
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª.

---

## –®–∞–≥ 4.4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nuke `menu.py`

### **4.4.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `menu.py`**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ —Ñ–∞–π–ª:
```
C:\Users\<–í—ã>\.nuke\menu.py
```

**–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –ù–ï–¢:**
–°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```python
# NukeSamurai menu
import nuke
nuke.pluginAddPath('./NukeSamurai')
```

**–ï—Å–ª–∏ —Ñ–∞–π–ª –ï–°–¢–¨:**
–û—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ **–ö–û–ù–ï–¶**:

```python
# NukeSamurai menu
import nuke
nuke.pluginAddPath('./NukeSamurai')
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª.

---

# ü§ñ –ß–ê–°–¢–¨ 5: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ú–æ–¥–µ–ª–µ–π SAM 2.1

## –®–∞–≥ 5.1: –°–æ–∑–¥–∞–π—Ç–µ –ü–∞–ø–∫—É –¥–ª—è –ú–æ–¥–µ–ª–µ–π

–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç):
```
C:\Users\<–í—ã>\.nuke\NukeSamurai\sam2_repo\checkpoints\
```

---

## –®–∞–≥ 5.2: –°–∫–∞—á–∞–π—Ç–µ –ú–æ–¥–µ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞:
```
https://github.com/facebookresearch/sam2/tree/main/checkpoints
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:**

### **–ú–æ–¥–µ–ª—å 1: Base+ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á)**
```
–§–∞–π–ª: sam2.1_hiera_base_plus.pt
–†–∞–∑–º–µ—Ä: ~80 MB
–°—Å—ã–ª–∫–∞: https://dl.fbaipublicfiles.com/segment_anything_2/092824/sam2.1_hiera_base_plus.pt
```

### **–ú–æ–¥–µ–ª—å 2: Large (–õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –º–µ–¥–ª–µ–Ω–Ω–µ–µ)**
```
–§–∞–π–ª: sam2.1_hiera_large.pt
–†–∞–∑–º–µ—Ä: ~224 MB
–°—Å—ã–ª–∫–∞: https://dl.fbaipublicfiles.com/segment_anything_2/092824/sam2.1_hiera_large.pt
```

### **–ú–æ–¥–µ–ª—å 3: Small (–ë—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ –∫–∞—á–µ—Å—Ç–≤–æ)**
```
–§–∞–π–ª: sam2.1_hiera_small.pt
–†–∞–∑–º–µ—Ä: ~46 MB
–°—Å—ã–ª–∫–∞: https://dl.fbaipublicfiles.com/segment_anything_2/092824/sam2.1_hiera_small.pt
```

### **–ú–æ–¥–µ–ª—å 4: Tiny (–°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è)**
```
–§–∞–π–ª: sam2.1_hiera_tiny.pt
–†–∞–∑–º–µ—Ä: ~39 MB
–°—Å—ã–ª–∫–∞: https://dl.fbaipublicfiles.com/segment_anything_2/092824/sam2.1_hiera_tiny.pt
```

---

## –®–∞–≥ 5.3: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ú–æ–¥–µ–ª–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–µ `.pt` —Ñ–∞–π–ª—ã –≤:
```
C:\Users\<–í—ã>\.nuke\NukeSamurai\sam2_repo\checkpoints\
```

**–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
C:\Users\<–í—ã>\.nuke\NukeSamurai\sam2_repo\checkpoints\
‚îú‚îÄ‚îÄ sam2.1_hiera_base_plus.pt   ‚Üê –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ sam2.1_hiera_large.pt       ‚Üê –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
‚îú‚îÄ‚îÄ sam2.1_hiera_small.pt       ‚Üê –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
‚îî‚îÄ‚îÄ sam2.1_hiera_tiny.pt        ‚Üê –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

**–ú–∏–Ω–∏–º—É–º –Ω—É–∂–Ω–∞ –û–î–ù–ê –º–æ–¥–µ–ª—å!** –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º `sam2.1_hiera_base_plus.pt`.

---

# ‚úÖ –ß–ê–°–¢–¨ 6: –§–∏–Ω–∞–ª—å–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ó–∞–ø—É—Å–∫

## –®–∞–≥ 6.1: –ü–æ–ª–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç—Ä—É–∫—Ç—É—Ä—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:

```
C:\Users\<–í—ã>\.nuke\
‚îú‚îÄ‚îÄ init.py                                 ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω
‚îú‚îÄ‚îÄ menu.py                                 ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω
‚îî‚îÄ‚îÄ NukeSamurai\
    ‚îú‚îÄ‚îÄ init.py                             ‚úÖ –ï—Å—Ç—å
    ‚îú‚îÄ‚îÄ menu.py                             ‚úÖ –ï—Å—Ç—å
    ‚îú‚îÄ‚îÄ scripts\
    ‚îÇ   ‚îú‚îÄ‚îÄ nuke_samurai.py                 ‚úÖ –ï—Å—Ç—å
    ‚îÇ   ‚îî‚îÄ‚îÄ sam2_worker.py                  ‚úÖ –ï—Å—Ç—å
    ‚îú‚îÄ‚îÄ sam2_repo\
    ‚îÇ   ‚îú‚îÄ‚îÄ sam2\                           ‚úÖ –ï—Å—Ç—å
    ‚îÇ   ‚îî‚îÄ‚îÄ checkpoints\
    ‚îÇ       ‚îî‚îÄ‚îÄ sam2.1_hiera_base_plus.pt   ‚úÖ –°–∫–∞—á–∞–Ω
    ‚îî‚îÄ‚îÄ icons\                              ‚úÖ –ï—Å—Ç—å
```

---

## –®–∞–≥ 6.2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ Nuke

1. –ó–∞–∫—Ä–æ–π—Ç–µ Nuke, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –æ—Ç–∫—Ä—ã—Ç
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Nuke –∑–∞–Ω–æ–≤–æ
3. –û—Ç–∫—Ä–æ–π—Ç–µ **Script Editor** (`Alt+X` –∏–ª–∏ `Windows ‚Üí Script Editor`)

**–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏:**
```
[NukeSamurai] Plugin loaded (GPU via subprocess)
```

‚úÖ **–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ë–ï–ó –æ—à–∏–±–æ–∫** ‚Üí –ü–ª–∞–≥–∏–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

‚ùå **–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —à–∞–≥–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç–∏ –≤ `init.py` –∏ `menu.py` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã

---

## –®–∞–≥ 6.3: –°–æ–∑–¥–∞–π—Ç–µ –£–∑–µ–ª SAMURAI

–í Nuke:

1. –ù–∞–∂–º–∏—Ç–µ `Tab` (–¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–æ–¥)
2. –í–≤–µ–¥–∏—Ç–µ `SAMURAI`
3. –í—ã–±–µ—Ä–∏—Ç–µ `SAMURAI` –∏–∑ —Å–ø–∏—Å–∫–∞
4. –ù–∞–∂–º–∏—Ç–µ `Enter`

**–î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —É–∑–µ–ª SAMURAI —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ SAMURAI                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ File Path:        [_________________]   ‚îÇ
‚îÇ [Update Path]                           ‚îÇ
‚îÇ [Create Bounding Box]                   ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ FPS:               [24]                 ‚îÇ
‚îÇ Frame Range:       [1001] - [1200]      ‚îÇ
‚îÇ Model Type:        [Base+]              ‚îÇ
‚îÇ File Type:         [png]                ‚îÇ
‚îÇ Output Path:       [_________________]   ‚îÇ
‚îÇ [Generate Mask]                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

‚úÖ **–ï—Å–ª–∏ —É–∑–µ–ª —Å–æ–∑–¥–∞–ª—Å—è** ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

---

# üé¨ –ß–ê–°–¢–¨ 7: –ü–µ—Ä–≤—ã–π –¢–µ—Å—Ç

## –®–∞–≥ 7.1: –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¢–µ—Å—Ç–æ–≤—É—é –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–í–∞–º –Ω—É–∂–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (PNG, JPG, EXR):
```
–ü—Ä–∏–º–µ—Ä:
D:\test_footage\image_0001.png
D:\test_footage\image_0002.png
D:\test_footage\image_0003.png
...
D:\test_footage\image_0100.png
```

---

## –®–∞–≥ 7.2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SAMURAI Node

1. **File Path**: –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   ```
   D:/test_footage/image_%04d.png
   ```

2. –ù–∞–∂–º–∏—Ç–µ **"Update Path"**
   - –ö–æ–Ω—Å–æ–ª—å –ø–æ–∫–∞–∂–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

3. –ù–∞–∂–º–∏—Ç–µ **"Create Bounding Box"**
   - –û—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ OpenCV —Å –ø–µ—Ä–≤—ã–º –∫–∞–¥—Ä–æ–º
   - –í—ã–¥–µ–ª–∏—Ç–µ –æ–±—ä–µ–∫—Ç –º—ã—à—å—é
   - –ù–∞–∂–º–∏—Ç–µ `Enter` –∏–ª–∏ `Space`

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - **Frame Range**: `1 - 100`
   - **FPS**: `24`
   - **Model Type**: `Base+`
   - **File Type**: `png`
   - **Output Path**: `D:/test_masks/mask_%04d.png`

5. –ù–∞–∂–º–∏—Ç–µ **"Generate Mask"**

---

## –®–∞–≥ 7.3: –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –ü—Ä–æ–≥—Ä–µ—Å—Å–æ–º

–í Nuke –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä:

```
SAM2 Propagation (GPU)
Loading Model...           [====----] 10%
Reading Frames...          [========] 30%
Detecting Object...        [=========] 40%
Frame 50/100 (50%)        [===========---] 50%
Saving Complete!           [==================] 100%
```

–í –∫–æ–Ω—Å–æ–ª–∏:
```
[SAMURAI] Starting SAM2 inference via system Python...
[SAMURAI] Using GPU: torch with CUDA in Python 3.10
[SAM2 Worker] torch 2.5.1+cu121, CUDA: True
[SAM2 Worker] Loading model: ...
[SAM2 Worker] Device: cuda:0
STAGE:Loading Model...
STAGE:Reading Frames...
STAGE:Detecting Object...
STAGE:Propagating Masks...
PROGRESS:50
STAGE:Frame 50/100 (50%)
...
[SAMURAI] ‚úÖ Masks generated successfully!
[SAMURAI] ‚úÖ Read node created: D:/test_masks/mask_%04d.png
```

‚úÖ **–ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫** ‚Üí –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

# üêõ –ß–ê–°–¢–¨ 8: –†–µ—à–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º

## –ü—Ä–æ–±–ª–µ–º–∞ 1: `ModuleNotFoundError: No module named 'torch'`

**–ü—Ä–∏—á–∏–Ω–∞**: –°–∏—Å—Ç–µ–º–Ω—ã–π Python –Ω–µ –≤–∏–¥–∏—Ç PyTorch

**–†–µ—à–µ–Ω–∏–µ**:
```cmd
pip install torch==2.5.1 torchvision==0.20.1 --index-url https://download.pytorch.org/whl/cu121
```

---

## –ü—Ä–æ–±–ª–µ–º–∞ 2: `CUDA –¥–æ—Å—Ç—É–ø–Ω–∞: False`

**–ü—Ä–∏—á–∏–Ω–∞**: PyTorch —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –±–µ–∑ CUDA

**–†–µ—à–µ–Ω–∏–µ**:
```cmd
pip uninstall torch torchvision
pip install torch==2.5.1 torchvision==0.20.1 --index-url https://download.pytorch.org/whl/cu121
```

---

## –ü—Ä–æ–±–ª–µ–º–∞ 3: `FileNotFoundError: sam2.1_hiera_base_plus.pt`

**–ü—Ä–∏—á–∏–Ω–∞**: –ú–æ–¥–µ–ª—å –Ω–µ —Å–∫–∞—á–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ**:
–°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å –∏–∑ –®–∞–≥–∞ 5.2 –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ `checkpoints/`

---

## –ü—Ä–æ–±–ª–µ–º–∞ 4: `[NukeSamurai] Plugin loaded` –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞**: –ü–ª–∞–≥–∏–Ω –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω –≤ `init.py`

**–†–µ—à–µ–Ω–∏–µ**:
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `C:\Users\<–í—ã>\.nuke\init.py` —Å–æ–¥–µ—Ä–∂–∏—Ç:
```python
import nuke
nuke.pluginAddPath('./NukeSamurai')
```

---

## –ü—Ä–æ–±–ª–µ–º–∞ 5: `KeyError: 111` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ –ø—Ä–æ–ø–∞–≥–∞—Ü–∏–∏

**–ü—Ä–∏—á–∏–Ω–∞**: SAM2 API –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ**:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ workaround –∏–∑ `SAM2_API_LIMITATION.md`:
- –ò–∑–º–µ–Ω–∏—Ç–µ Frame Range —Ç–∞–∫, —á—Ç–æ–±—ã –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä –±—ã–ª "—Ö–æ—Ä–æ—à–∏–º"
- –ò–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ –≤ –¥–≤–∞ –ø—Ä–æ—Ö–æ–¥–∞

---

# üìû –ü–æ–º–æ—â—å –∏ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

## –ï—Å–ª–∏ –ß—Ç–æ-—Ç–æ –ù–µ –†–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Nuke** (Script Editor)
2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–Ω—Å–æ–ª–∏** –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
3. **–°–æ–∑–¥–∞–π—Ç–µ Issue –Ω–∞ GitHub** —Å:
   - –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
   - –õ–æ–≥–∞–º–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
   - –í–µ—Ä—Å–∏–µ–π Nuke, Windows, GPU

## –ü–æ–ª–µ–∑–Ω—ã–µ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```cmd
# –í–µ—Ä—Å–∏—è Python
python --version

# –í–µ—Ä—Å–∏—è PyTorch
python -c "import torch; print(torch.__version__)"

# CUDA –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
python -c "import torch; print(torch.cuda.is_available())"

# GPU –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
nvidia-smi

# –°–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
pip list
```

---

# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –§–∏–Ω–∞–ª—å–Ω–æ–π –ü—Ä–æ–≤–µ—Ä–∫–∏

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —Å–æ–æ–±—â–∏—Ç—å –æ–± —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ, —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] Python 3.10 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`python --version`)
- [ ] PyTorch 2.5.1+cu121 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`pip show torch`)
- [ ] CUDA –¥–æ—Å—Ç—É–ø–Ω–∞ (`python -c "import torch; print(torch.cuda.is_available())"`)
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`python check_dependencies.py`)
- [ ] –ü–ª–∞–≥–∏–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ `C:\Users\<–í—ã>\.nuke\NukeSamurai\`
- [ ] `init.py` –∏ `menu.py` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ú–æ–¥–µ–ª—å SAM 2.1 —Å–∫–∞—á–∞–Ω–∞ –≤ `checkpoints/`
- [ ] Nuke –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `[NukeSamurai] Plugin loaded (GPU via subprocess)`
- [ ] –£–∑–µ–ª SAMURAI —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Å–æ–∫ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ

---

# üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!

–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, **NukeSamurai —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å–∫–∏ —Å GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º (100x!)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å Read –Ω–æ–¥—ã
- –†–∞–±–æ—Ç–∞—Ç—å —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏ –ª—é–±–æ–π –¥–ª–∏–Ω—ã

**–°—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ —Ç—Ä–µ–∫–∏–Ω–≥–∞!** üé¨‚ú®

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã

- `README.md` - –û–±–∑–æ—Ä –ø–ª–∞–≥–∏–Ω–∞
- `IMPROVEMENTS.md` - –°–ø–∏—Å–æ–∫ —É–ª—É—á—à–µ–Ω–∏–π v1.1
- `SAM2_API_LIMITATION.md` - –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- `SAM3_ANALYSIS.md` - –ê–Ω–∞–ª–∏–∑ SAM 3.0 –¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0  
**–î–∞—Ç–∞**: 20.11.2025  
**–ü–ª–∞–≥–∏–Ω**: NukeSamurai v1.1

